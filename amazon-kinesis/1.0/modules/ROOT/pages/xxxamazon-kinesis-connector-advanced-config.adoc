= Amazon Kinesis Data Streams Connector 1.0 Advanced Configuration Information - Mule 4

*REVIEWERS, this topic is not part of our template and will be removed. This information will go in the Reference Guide. I might also use some in the config-topics.adoc topic.*

== Introduction
This page describes in detail advanced options available when configuring the connector and their meanings.

=== Advanced section (Common):
[%header,cols="30a,10a,60a",width=100%]
|===
|Field name|Default Value| Meaning
|Connection Timeout|30| Connection Timeout.
|Connection Timeout Unit|Seconds| The time unit for the *Connection Timeout* field.
|Response Timeout|30| The maximum time to wait between an HTTP request is sent and when a response was received.
|Response Timeout Unit|Seconds| The time unit for the *Response Timeout* field.
|===

=== Advanced section:
[%header,cols="30a,10a,60a",width=100%]
|===
|Field name|Default Value| Meaning
|Record Max Buffered Time|3| The amount of time a record can spend in the record buffer at most. Records can be sent earlier than this depending on other rate limits.
|Record Max Buffered Time Unit|Seconds| The time unit for the *Record Max Buffered Time* field
|Aggregation Enabled|True| With Aggregation enabled, multiple records are combined into a single record to improve throughput and reduce the amount of API calls to kinesis.
|Aggregation Max Count|N/A| The maximum number of records combined into a single aggregated record. By default *Aggregation Max Size* is used instead.
|Aggregation Max Size|51200| The maximum data size combined into a single aggregated record.
|Aggregation Max Size Unit|Bytes| The data unit for the *Aggregation Max Size* field.
|Collection Max Count|N/A| Collection refers to batching multiple Kinesis Data Streams records and sending them in a single HTTP request. Collection differs from aggregation in that it is working with groups of Kinesis Data Streams records. By default *Collection Max Size* is used instead.
|Collection Max Size|5242880| The maximum data size of records sent in a single collection.
|Collection Mas Size Unit|Bytes| The data unit for the *Collection Max Size* field.
|Max Connections|100|Maximum number of connections to open to the backend. HTTP requests are sent in parallel over multiple connections. Setting this too high may impact latency and consume additional resources without increasing throughput.
|Min Connections|N/A|Minimum number of connections to keep open to the backend. There should be no need to increase this in general.
|Rate Limit|150%|
The rate limit prevents the producer from sending data too fast to a shard. Such a limit is useful for reducing bandwidth and CPU cycle wastage from sending requests that we know are going to fail from throttling.

Kinesis enforces limits on both the number of records and number of bytes per second. This setting applies to both.

The default value of 150% is chosen to allow a single producer instance to completely saturate the allowance for a shard. This is an aggressive setting. If you prefer to reduce throttling errors rather than completely saturate the shard, consider reducing this setting.
|Record TTL|N/A|This setting is useful if your application cannot or does not wish to tolerate late records. Records will still incur network latency after they leave the KPL, so take that into consideration when choosing a value for this setting.
|Record TTL Time Unit|N/A| The time unit for the *Record TTL* field.
|Thread Pool Size|N/A|Sets the maximum number of threads that the native process' thread pool will be configured with. The default value N/A allows the KPL process to choose the size of the thread pool.
|===

== Next Step

After you complete advance configuration of the connector, you can try
the xref:amazon-kinesis-connector-examples.adoc[Examples].

== See Also

* xref:amazon-kinesis-connector-config-topics.adoc[Kinesis Connector Configuration Topics]
* xref:connectors::introduction/introduction-to-anypoint-connectors.adoc[Introduction to Anypoint Connectors]
* https://help.mulesoft.com[MuleSoft Help Center]
